<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="itemsPage.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://kit.fontawesome.com/322b14b2ff.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../footers/footer.css">
    <link rel="stylesheet" href="../nav/Navbar.css">
    <title>Items Page-Headphones</title>
</head>
<body>
    
    <div id="navbar"></div>

    <div id="container2">
        <div id="filter">
            <div class="form-check">
                <h3>Discount</h3>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault1">
                <label class="form-check-label" for="flexCheckDefault">All Discounted Items</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">20% or More</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">30% or More</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">40% or More</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">50% or More</label><br>
            </div>
            <hr>
            <div class="form-check">
                <h3>Price</h3>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Below $200</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">$200 - $400</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">$400 - $550</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">500$ or Above</label><br>
            </div>
            <hr>
            <div class="form-check">
                <h3>Customer Ratings</h3>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Top-Rated</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">5 Stars</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">4 Stars & Up</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">3 Stars & Up</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">2 Stars & Up</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">1 Star & Up</label><br>
            </div>
            <hr>
            <div class="form-check">
                <h3>Condition</h3>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">New</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Pre-Owned</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Refurbished</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Open-Box</label><br>
            </div>
            <hr>
            <div class="form-check">
                <h3>Current Deals</h3>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">On Sale</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Clearance</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Free Shipping</label><br>
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">Package Deals</label><br>
            </div>
        </div>
        <div id="body">
            <div id="display">
                <div>
                    <a href="">
                        <div>
                            <img src="https://pisces.bbystatic.com/image2/BestBuy_US/dam/top-MMT-542925-Save200MacBookPro_DER-ed7ee31b-5c16-4f1d-ab3b-0d1011d6ddd4.jpg;maxHeight=280;maxWidth=412" alt="img">
                            <a href=""><h3>Save $200: Macbook</h3></a>
                        </div>
                    </a>
                </div>
                <div>
                    <a href="">
                        <div>
                            <img src="https://pisces.bbystatic.com/image2/BestBuy_US/dam/pol_6503233-MMT-564257-0718-0a4416cc-2d6f-4ff1-a243-fbe600cc566f.jpg;maxHeight=280;maxWidth=412" alt="img">
                            <a href=""><h3>Save upto $250: Laptops</h3></a>
                        </div>
                    </a>
                </div>
                <div>
                    <a href="">
                        <div>
                            <img src="https://pisces.bbystatic.com/image2/BestBuy_US/dam/gl67745-tts-logo-only-3c8e2000-7623-45b9-910d-473c03b98890.jpg;maxHeight=280;maxWidth=412" alt="img">
                            <a href=""><h3>Member Exclusive Savings</h3></a>
                        </div>
                    </a>
                </div>
            </div>
            <hr>
            <div id="head">
                <div>
                    <h5>6 Items</h5>
                </div>
                <div>
                    <select  onchange="sorting()" id="srt">
                        <option value="">Sort By</option>
                        <option value="lowToHigh">Price: Low To High</option>
                        <option value="highToLow">Price: High To Low</option>
                        <option value="HighToLow">Rating: High To Low</option>
                        <option value="LowToHigh">Rating: Low To High</option>
                        
                    </select>
                </div>
            </div>
            <hr>
            <div id="items">

            </div>
        </div>
    </div>

    <div id="footer"></div>
</body>
</html>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- <script src="itemsPage.js"></script> -->
<script>
    
 let x=JSON.parse(localStorage.getItem('cart-items')) || [];
 let y=JSON.parse(localStorage.getItem('saved-items')) || [];

appendData = (data) => {
    let container=document.getElementById('items');
    data.forEach( (element) => {
        let div=document.createElement('div');

        let div1=document.createElement('div');
        let img=document.createElement('img');
        img.src=element.image;
        let details=document.createElement('button');
        details.innerText="View Details";
        div1.append(img, details);

        let div2=document.createElement('div');
        let a=document.createElement('a');
        a.setAttribute('href','');
        let p1 =document.createElement('p');
        p1.innerText=element.desc2;
        a.innerHTML=p1.innerText;
        let p2=document.createElement('p');
        p2.innerText=`Model: ` +`${element.Model}`;
        let p3=document.createElement('p');
        p3.innerText=`SKU: ${element.SKU}`;
        let rating=document.createElement('h6');
        rating.innerText=`Ratings: ${element.rating} / 5`;
        let p4=document.createElement('h5');
        p4.innerText="Get it Today"
        let h61=document.createElement('h6');
        h61.innerText="Pickup:";
        let p5=document.createElement('p');
        p5.innerText="Order now for pickup";
        let h62=document.createElement('h6');
        h62.innerText="Shipping:";
        let p6=document.createElement('p');
        p6.innerText="Available in your area";
        div2.append(a, p2, p3, rating, p4, h61, p5, h62, p6);
        
        let div3=document.createElement('div');
        let price=document.createElement('h4');
        price.innerText=`Price: $${element.price}`;
        let save=document.createElement('button');
        save.setAttribute('id', 'save');
        if(element.save==undefined){
            save.innerText=`Save $0`;
        }
        else{
            save.innerText=`Save $${element.save}`;
        }
        let newPrice=document.createElement('h4');
        newPrice.setAttribute('id', 'newPrice');
        if(element.newPrice==undefined){
            newPrice.innerText=`New Price: $${element.price}`;
        }
        else{
            newPrice.innerText=`New Price: $${element.newPrice}`;
        }
        let addItem=document.createElement('button');
        addItem.setAttribute('id', 'add-item');
        addItem.innerText="Add To Cart"
        addItem.addEventListener('click', function(){
            x.push(element);
            localStorage.setItem('cart-items', JSON.stringify(x));
            alert('Item Added to card Successfully');
            window.location.reload();
        })
        let saveItem=document.createElement('button');
        saveItem.setAttribute('id', 'save-item');
        saveItem.innerText="Save Item";
        saveItem.addEventListener('click', function(){
            y.push(element);
            localStorage.setItem('saved-items', JSON.stringify(y));
            alert('Item Saved Successfully'); 
        })
        div3.append(price, save, newPrice, addItem, saveItem);
        
        div.append(div1, div2, div3);
        let hr=document.createElement('hr');
        container.append(div, hr);

    });
}

getData= async () =>{
    const url=`https://suranjanachary.github.io/databasev2/db.json`
    // 
    try{
        let res = await fetch(url);
        let data=await res.json();
        let laptops = data.products.headphones;
        // console.log(laptops);
        localStorage.setItem('laptops', JSON.stringify(laptops));
        appendData(laptops);
    }catch(err){
        console.log("Error: "+err);
    }
}
getData();




let sorting = () =>{
    let laptops = JSON.parse(localStorage.getItem('laptops')) || [];
    
    let items=document.querySelector('#items');
    if(srt.value=="lowToHigh"){
        items.innerHTML=null;
        appendData(laptops.sort(function(a,b){
            return +a.price- +b.price;
        }))

    }
    else if(srt.value=="highToLow"){
        items.innerHTML=null;
        appendData(laptops.sort(function(a,b){
            return +b.newPrice- +a.newPrice;
        }))
    }
    else if(srt.value=="HighToLow"){
        items.innerHTML=null;
        appendData(laptops.sort(function(a,b){
            return +b.rating- +a.rating;
        }))
    }
    else if(srt.value=="LowToHigh"){
        items.innerHTML=null;
        appendData(laptops.sort(function(a,b){
            return +a.rating- +b.rating;
        }))
    }
}







</script>

<script type="module">
    import { navbar, count_cart,takequery,show_log_menu,showmenu } from '../nav/navbar.js';
    document.querySelector( "#navbar" ).innerHTML = navbar();
    document.querySelector( "#search" ).addEventListener( "keypress", (ele) => {
        takequery(ele)
    } );
    count_cart()
    document.querySelector( "#menu" ).addEventListener( "click", showmenu );
    document.querySelector( "#ac_menu" ).addEventListener( "click", show_log_menu );
</script>

<script type="module">
    import footer from "../footers/footer.js"
    document.getElementById("footer").innerHTML = footer();
    console.log();
    
    let submit=document.getElementById('submit');

    let subscribers=JSON.parse(localStorage.getItem('subEmail')) || [];
    let subscriberAlert = () => {
        alert('Now you are successfully subscribed for our hottest deals, coolest new products and exclusive sales events.')
    };
    let subscribeEmail = () => {
        let email=document.getElementById('email').value;
        subscribers.push(email);
        localStorage.setItem('subEmail', JSON.stringify(subscribers));
        setTimeout(subscriberAlert, 1000);
        // clearTimeout(infoAlert);
        document.getElementById('email').value = null;
    };

    
    submit.addEventListener('click', subscribeEmail);

    var data = JSON.parse(localStorage.getItem("bestbuyuserdata"))

let naME=document.getElementById("NaMe")
naME.innerText=" Welcome "+data[0].name
</script>